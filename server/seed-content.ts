import { MongoClient } from "mongodb";

const MONGODB_URI = process.env.MONGODB_URI || "mongodb://localhost:27017/twaq";

async function seedContent() {
  const client = new MongoClient(MONGODB_URI);
  await client.connect();
  const db = client.db();
  
  // Seed content pages
  const contents = [
    {
      slug: "about",
      title: "نشأة الجمعية",
      titleEn: "About Us",
      content: `
        <h2>نشأة الجمعية</h2>
        <p>تُعد جمعية طويق إحدى الجمعيات الخيرية الرائدة في المملكة العربية السعودية، وقد تأسست بهدف تقديم الدعم والرعاية للفئات المحتاجة، والعمل على تعزيز التكافل الاجتماعي وخدمة المجتمع.</p>
        <p>ومنذ انطلاقتها، كرّست الجمعية جهودها لتنفيذ برامج ومبادرات إنسانية متنوعة تسهم في تحسين جودة حياة المستفيدين، وتقديم المساعدات للأسر المحتاجة، ضمن إطار رسالتها الخيرية المباركة.</p>
        <p>وتسعى جمعية طويق إلى أن تكون نموذجًا مؤثرًا في العمل المجتمعي من خلال مشاريع تنموية مستدامة، وشراكات فعّالة تحقق أثرًا إيجابيًا واسعًا داخل نطاق خدماتها.</p>
      `
    },
    {
      slug: "goals",
      title: "أهداف الجمعية",
      titleEn: "Goals",
      content: `
        <h2>أهداف جمعية طويق للخدمات الإنسانية</h2>
        <ul>
          <li>الارتقاء بالمستوى المعيشي للمستفيدين</li>
          <li>العمل على ترسيخ مبدأ التكافل الاجتماعي بين أفراد المجتمع</li>
          <li>تدريب أبناء المستفيدين وتأهيلهم لسوق العمل</li>
          <li>تقديم المساعدات العينية لكافة الفئات المحتاجة</li>
          <li>تقديم المساعدات المالية لكافة الفئات المحتاجة</li>
        </ul>
      `
    },
    {
      slug: "vision",
      title: "الرؤية والرسالة",
      titleEn: "Vision & Mission",
      content: `
        <h2>رؤيتنا</h2>
        <p>الريادة في العمل الخيري والإنساني بالمملكة العربية السعودية</p>
        
        <h2>رسالتنا</h2>
        <p>تقديم الدعم والمساعدة للفئات المحتاجة من خلال برامج مستدامة تحقق التكافل الاجتماعي وتساهم في بناء مجتمع متماسك</p>
        
        <h2>قيمنا</h2>
        <ul>
          <li><strong>الأمانة:</strong> نضمن وصول التبرعات لمستحقيها</li>
          <li><strong>الشفافية:</strong> نعمل بوضوح تام في جميع عملياتنا</li>
          <li><strong>التكافل:</strong> نؤمن بأهمية التعاون والتكاتف المجتمعي</li>
          <li><strong>المسؤولية:</strong> نتحمل مسؤولية خدمة المجتمع</li>
        </ul>
      `
    },
    {
      slug: "founders",
      title: "الأعضاء المؤسسون / أعضاء الجمعية العمومية",
      titleEn: "Founding Members",
      content: `
        <p>تفتخر جمعية طويق للخدمات الإنسانية بنخبة من الأعضاء الأوائل الذين كان لهم الدور الأساسي في تأسيس الجمعية ودعم مسيرتها منذ انطلاقتها، سائلين الله لهم دوام التوفيق والسداد.</p>
        
        <h3>الأعضاء الأوائل – حفظهم الله</h3>
        <ul>
          <li>عبدالله أحمد علي حكمي</li>
          <li>حسن زاهر أحمد علي حكمي</li>
          <li>عبدالواهاب إبراهيم عبدالله علي حكمي</li>
          <li>محمد سعد محمد أحمد حكمي</li>
          <li>محمد سعد محمد جمال حكمي</li>
          <li>نورة سعد محمد القحطاني</li>
          <li>محمد إبراهيم محمد حكمي</li>
          <li>محمد أحمد صالح أحمد حكمي</li>
          <li>بدر عبدالله يحيى علي مري</li>
          <li>حسام الدين عثمان علي جمال حكمي</li>
          <li>إبراهيم عثمان علي حكمي</li>
          <li>عبدالله عبدالله صالح حكمي</li>
          <li>ناصر عبدالله عبدالعزيز آل زعلة</li>
        </ul>
      `
    },
    {
      slug: "founders-legacy",
      title: "مؤسسو الجمعية (التاريخيون)",
      titleEn: "Founding Fathers (Historical)",
      content: `
        <h2>مؤسسو الجمعية</h2>
        <p>الأعضاء المؤسسون رحمهم الله جميعاً</p>

        <div class="space-y-8">
          <div>
            <h3>الشيخ عبدالله عريف (1336 - 1397هـ)</h3>
            <p><strong>عضو مؤسس</strong></p>
            <p>عندما توفي رحمه الله كان رئيساً لمجلس إدارة الجمعية كما كان أميناً للعاصمة المقدسة، وهو أول أمين يحصل على وسام تقدير من الدولة في عهد جلالة الملك خالد بن عبدالعزيز (رحمه الله) بتوصية من صاحب السمو الملكي الأمير ماجد بن عبدالعزيز (رحمه الله) وزير الشؤون البلدية والقروية.</p>
          </div>

          <div>
            <h3>الشيخ صالح محمد جمال (1338 - 1411هـ)</h3>
            <p><strong>عضو مؤسس</strong></p>
            <p>عندما توفي رحمه الله كان رئيساً لمجلس إدارة الجمعية كما كان رئيساً للمجلس البلدي ورئيساً لمجلس إدارة المؤسسة الأهلية ورئيساً لمجلس إدارة الغرفة التجارية الصناعية بمكة المكرمة.</p>
          </div>

          <div>
            <h3>الشيخ أحمد محمد جمال (1343 - 1413هـ)</h3>
            <p><strong>عضو مؤسس</strong></p>
            <p>عندما توفي رحمه الله كان رئيساً لمجلس إدارة الجمعية كما كان أستاذاً لمادة الثقافة الإسلامية بجامعة الملك عبدالعزيز بجدة ثم بجامعة أم القرى (دون مقابل).</p>
          </div>

          <div>
            <h3>الشيخ حامد حسن مطاوع (1347 - 1413هـ)</h3>
            <p><strong>عضو مؤسس</strong></p>
            <p>كان أول أمين صندوق للجمعية منذ إنشائها عام 1371هـ وشغل مدير عام مؤسسة مكة للطباعة والإعلام وكان رئيس تحرير جريدة الندوة.</p>
          </div>

          <div>
            <h3>الشيخ عبدالرازق بليلة (1339 - 1430هـ)</h3>
            <p><strong>عضو مؤسس</strong></p>
            <p>عضو مؤسس لجمعية البر بمكة المكرمة "هيئة صندوق البر" كما أسس مع الشيخ صالح محمد جمال مكتبة الثقافة عام 1364هـ.</p>
          </div>

          <div>
            <h3>الشيخ عبدالعزيز الرفاعي (1342 - 1414هـ)</h3>
            <p><strong>عضو مؤسس</strong></p>
            <p>عضو مؤسس لجمعية البر بمكة المكرمة "هيئة صندوق البر" وهو كاتب معروف على مستوى الوطن بأسلوبه الرصين المشرق.</p>
          </div>

          <div>
            <h3>الشيخ عبدالعزيز ساب (1348 - 1412هـ)</h3>
            <p><strong>عضو مؤسس</strong></p>
            <p>عضو مؤسس لجمعية البر بمكة المكرمة "هيئة صندوق البر" وعندما رحل إلى طيبة الطيبة ساهم في تأسيس جمعية البر بالمدينة المنورة.</p>
          </div>

          <div>
            <h3>الشيخ عمر عبدالجبار (1320 - 1391هـ)</h3>
            <p><strong>عضو مؤسس</strong></p>
            <p>كان رائداً في التأليف المدرسي ورائداً في تعليم البنات في المملكة حيث أسس مدارس الزهراء للبنات بمكة المكرمة.</p>
          </div>
        </div>
      `
    },
    {
      slug: "board",
      title: "أعضاء مجلس الإدارة",
      titleEn: "Board of Directors",
      content: `
        <h2>أعضاء مجلس الإدارة</h2>
        <ul>
          <li>عبدالله أحمد علي حكمي</li>
          <li>حسن زاهر أحمد علي حكمي</li>
          <li>عبدالواهاب إبراهيم عبدالله علي حكمي</li>
          <li>محمد سعد محمد أحمد حكمي</li>
          <li>محمد سعد محمد جمال حكمي</li>
        </ul>
      `
    },
    {
      slug: "bylaws",
      title: "اللائحة الأساسية",
      titleEn: "Bylaws",
      content: `
        <h2>اللائحة الأساسية لجمعية طويق للخدمات الإنسانية</h2>
        <p>تأسست الجمعية وفقاً لنظام الجمعيات والمؤسسات الأهلية الصادر بالمرسوم الملكي رقم (م/8) وتاريخ 1437/02/19هـ ولائحته التنفيذية.</p>
        
        <h3>العضوية</h3>
        <ul>
          <li>عضوية عادية: اشتراك 100 ريال سنوياً</li>
          <li>عضوية داعمة: تبرع لا يقل عن 100,000 ريال سعودي</li>
        </ul>
        
        <h3>الأجهزة الرئيسية</h3>
        <ul>
          <li>الجمعية العمومية</li>
          <li>مجلس الإدارة (5-13 عضو، مدة الدورة 4 سنوات)</li>
          <li>اللجان الدائمة والمؤقتة</li>
          <li>الجهاز التنفيذي</li>
        </ul>
      `
    }
  ];

  for (const content of contents) {
    await db.collection("content").updateOne(
      { slug: content.slug },
      { $set: { ...content, updatedAt: new Date() } },
      { upsert: true }
    );
  }

  // Seed bank accounts
  const bankAccounts = [
    {
      bankName: "مصرف الراجحي",
      bankNameEn: "Al Rajhi Bank",
      accountName: "جمعية طويق للخدمات الإنسانية",
      accountNameEn: "Tuwaiq Humanitarian Services Association",
      iban: "SA3080000589608019567923",
      logo: "rajhi"
    },
    {
      bankName: "البنك العربي الوطني",
      bankNameEn: "Arab National Bank",
      accountName: "طويق للخدمات الإنسانية",
      accountNameEn: "Tuwaiq Humanitarian Services",
      iban: "SA6930400108095810360018",
      logo: "anb"
    }
  ];

  for (const account of bankAccounts) {
    await db.collection("bank_accounts").updateOne(
      { iban: account.iban },
      { $set: { ...account, createdAt: new Date() } },
      { upsert: true }
    );
  }

  // Seed default roles
  const roles = [
    { name: "admin", nameAr: "مدير النظام", permissions: ["all"] },
    { name: "accountant", nameAr: "محاسب", permissions: ["donations", "reports", "transfers"] },
    { name: "delivery", nameAr: "مندوب توصيل", permissions: ["delivery_orders"] },
    { name: "user", nameAr: "مستخدم", permissions: ["donate", "profile"] }
  ];

  for (const role of roles) {
    await db.collection("roles").updateOne(
      { name: role.name },
      { $set: { ...role, createdAt: new Date() } },
      { upsert: true }
    );
  }

  // Seed system stats
  await db.collection("system_stats").updateOne(
    {},
    { $set: { 
      totalOrganizations: 50,
      totalBeneficiaries: 8350,
      employee_fees_percentage: 10,
      updatedAt: new Date()
    }},
    { upsert: true }
  );

  console.log("Content seeded successfully!");
  await client.close();
}

seedContent().catch(console.error);
